(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{120:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r(0),c=r.n(n),l=r(11),i=r.n(l),s=r(24),j=r(17),o=r(160),u=r(155),b=r(163),d=r(123),O=r(124),h=r(151),x=r(154),p=r(122),f=function(e){return{type:"SET_LOGGED",user:e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_LOGGED":return null;case"SET_LOGGED":return t.user;default:return e}},v=function(){var e=Object(j.c)((function(e){return e.login})),t=Object(j.b)();return Object(a.jsx)(h.a,{children:Object(a.jsxs)(x.a,{children:[Object(a.jsx)(p.a,{component:s.b,to:"/",children:"Home"}),Object(a.jsx)(p.a,{component:s.b,to:"/courses",children:"Courses"}),Object(a.jsx)(p.a,{component:s.b,to:"/store",children:"Store"}),Object(a.jsx)(p.a,{component:s.b,to:"/login",children:"Login"}),Object(a.jsx)(p.a,{component:s.b,to:"/register",children:"Register"}),e&&Object(a.jsx)(p.a,{onClick:function(e){e.preventDefault(),t({type:"CLEAR_LOGGED"}),window.localStorage.clear()},children:"Logout"})]})})},g=function(e){var t=e.title,r=t||"PLACEHOLDER";return Object(a.jsx)(b.a,{pb:"2em",children:Object(a.jsxs)(d.a,{children:[Object(a.jsx)(u.a,{children:Object(a.jsx)(O.a,{variant:"h1",align:"center",paragraph:!0,children:r})}),Object(a.jsx)(v,{})]})})},y=r(14),C=function(){return Object(a.jsx)("div",{children:"Courses"})},w=r(46),k=r(8),S=r(80),E=r(156),L=r(164),A=r(157),D=r(158),q=r(18),I=r.n(q),G=r(26),T=r(35),M=r.n(T),N="/api/products",P={getAll:function(){return M.a.get(N).then((function(e){return e.data}))},create:function(){var e=Object(G.a)(I.a.mark((function e(t){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post(N,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=r(161),U=function(e){var t=Object(n.useState)(""),r=Object(w.a)(t,2),a=r[0],c=r[1];return{type:e,value:a,onChange:function(e){c(e.target.value)},clear:function(e){e.preventDefault(),c("")}}},z=function(e){var t=e.products,r=e.setProducts,n=U("text"),c=U("text"),l=U("number"),i=U("number");return Object(a.jsx)(b.a,{children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={name:n.value,description:c.value,euros:l.value,cents:i.value};try{P.create(a).then((function(e){console.log("Added product",e),r(t.concat(e))}))}catch(s){console.log(s)}},children:[Object(a.jsx)(O.a,{variant:"h6",children:"Create new"}),Object(a.jsxs)(O.a,{paragraph:!0,children:[Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Name",variant:"outlined"},n),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",size:"medium",onClick:n.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Description",variant:"outlined"},c),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",size:"small",onClick:c.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Euros",variant:"outlined"},l),{},{clear:null,min:"0",required:!0})),Object(a.jsx)(p.a,{color:"primary",size:"small",onClick:l.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Cents",variant:"outlined"},i),{},{clear:null,min:"0",max:"99",required:!0})),Object(a.jsx)(p.a,{color:"primary",size:"small",onClick:i.clear,children:"Clear"}),Object(a.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})]})]})})},J=function(e){var t=e.product;return Object(a.jsx)(b.a,{children:Object(a.jsxs)(O.a,{children:[t.name,"  ",t.euros,",",t.cents,"\u20ac"]})})},_=function(e){var t=e.children,r=e.value,n=e.index,c=Object(S.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(k.a)(Object(k.a)({role:"tabpanel",hidden:r!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),{},{children:r===n&&Object(a.jsx)(b.a,{p:3,children:Object(a.jsx)(O.a,{children:t})})}))},B=function(){var e=Object(n.useState)(null),t=Object(w.a)(e,2),r=t[0],c=t[1],l=Object(n.useState)(0),i=Object(w.a)(l,2),s=i[0],j=i[1];Object(n.useEffect)((function(){P.getAll().then((function(e){c(e)}))}),[]);return Object(a.jsxs)(b.a,{children:[Object(a.jsx)(E.a,{color:"secondary",position:"static",children:Object(a.jsxs)(L.a,{value:s,onChange:function(e,t){j(t)},children:[Object(a.jsx)(A.a,{label:"Store"}),Object(a.jsx)(A.a,{label:"Create"})]})}),Object(a.jsxs)(u.a,{children:[Object(a.jsx)(_,{value:s,index:0,children:Object(a.jsx)(b.a,{children:r?Object(a.jsx)("ul",{children:r.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(J,{product:e})},e.id)}))}):Object(a.jsx)(D.a,{})})}),Object(a.jsx)(_,{value:s,index:1,children:Object(a.jsx)(z,{products:r,setProducts:c})})]})]})},H="/api/users",W={getAll:function(){return M.a.get(H).then((function(e){return e.data}))},create:function(){var e=Object(G.a)(I.a.mark((function e(t){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post(H,t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},F=function(){var e=Object(j.c)((function(e){return e.login})),t=Object(j.b)(),r=Object(y.f)(),n=U("text"),c=U("password"),l=U("text"),i=U("text"),s=U("text"),o=U("text"),d=U("email");return e?Object(a.jsx)(b.a,{children:Object(a.jsxs)(O.a,{variant:"h6",children:["Already Logged in as: ",e]})}):Object(a.jsx)(b.a,{children:Object(a.jsx)(u.a,{children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a={username:n.value,firstname:l.value,lastname:i.value,address:s.value,postcode:o.value,email:d.value,password:c.value};try{W.create(a).then((function(e){console.log("Added user",e),t(f(e.username)),r.push("/")}))}catch(j){console.log(j)}},autoComplete:"off",children:[Object(a.jsx)(O.a,{variant:"h4",paragraph:!0,children:"Register"}),Object(a.jsxs)(O.a,{paragraph:!0,children:[Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Username",variant:"outlined"},n),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",onClick:n.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Password",variant:"outlined"},c),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",onClick:c.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"First name",variant:"outlined"},l),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",onClick:l.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Last name",variant:"outlined"},i),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",onClick:i.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Address",variant:"outlined"},s),{},{clear:null})),Object(a.jsx)(p.a,{color:"primary",onClick:s.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Postcode",variant:"outlined"},o),{},{clear:null})),Object(a.jsx)(p.a,{color:"primary",onClick:o.clear,children:"Clear"}),Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Email",variant:"outlined"},d),{},{clear:null})),Object(a.jsx)(p.a,{color:"primary",onClick:d.clear,children:"Clear"}),Object(a.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})]})]})})})},V={login:function(){var e=Object(G.a)(I.a.mark((function e(t){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.post("/api/login",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K=function(){var e=Object(j.c)((function(e){return e.login})),t=Object(j.b)(),r=Object(y.f)(),n=U("text"),c=U("password"),l=function(){var e=Object(G.a)(I.a.mark((function e(a){var l;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,V.login({username:n.value,password:c.value});case 4:l=e.sent,localStorage.setItem("token",l.token),window.localStorage.setItem("loggedUser",JSON.stringify(l)),t(f(l.username)),r.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Exception logging in",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return e?Object(a.jsx)(u.a,{children:Object(a.jsxs)(O.a,{variant:"h6",children:["Already Logged in as: ",e]})}):Object(a.jsx)(b.a,{children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(O.a,{variant:"h4",paragraph:!0,children:"Login"}),Object(a.jsxs)("form",{onSubmit:l,children:[Object(a.jsxs)(O.a,{paragraph:!0,children:[Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Username",variant:"outlined"},n),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",onClick:n.clear,children:"Clear"})]}),Object(a.jsxs)(O.a,{paragraph:!0,children:[Object(a.jsx)(R.a,Object(k.a)(Object(k.a)({label:"Password",variant:"outlined"},c),{},{clear:null,required:!0})),Object(a.jsx)(p.a,{color:"primary",onClick:c.clear,children:"Clear"})]}),Object(a.jsx)(p.a,{variant:"contained",color:"primary",type:"submit",children:"Login"})]})]})})},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return t.data;case"ADD":return t.user;default:return e}},X=function(){var e=Object(j.c)((function(e){return e.users})),t=Object(j.b)();Object(n.useEffect)((function(){t(function(){var e=Object(G.a)(I.a.mark((function e(t){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getAll();case 2:r=e.sent,t({type:"INIT",data:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]);return Object(a.jsx)(b.a,{children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(O.a,{variant:"h4",children:"Users"}),Object(a.jsx)("ul",{children:e?e.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsxs)(O.a,{paragraph:!0,children:[e.username," - ",e.firstname," ",e.lastname," ",e.address,"."]})},e.id)})):Object(a.jsx)(D.a,{})})]})})},Y=r(159),Z=function(){return Object(a.jsx)(b.a,{pb:"2em",pt:"40em",children:Object(a.jsxs)(O.a,{align:"center",children:["Made by Ville Manninen. Licensed ",Object(a.jsx)(Y.a,{href:"https://opensource.org/licenses/MIT",children:"MIT"})]})})},$=function(){return Object(a.jsxs)(d.a,{className:"main-body-box",children:[Object(a.jsxs)(y.c,{children:[Object(a.jsx)(y.a,{path:"/courses",children:Object(a.jsx)(C,{})}),Object(a.jsx)(y.a,{path:"/store",children:Object(a.jsx)(B,{})}),Object(a.jsx)(y.a,{path:"/register",children:Object(a.jsx)(F,{})}),Object(a.jsx)(y.a,{path:"/login",children:Object(a.jsx)(K,{})}),Object(a.jsx)(y.a,{path:"/",children:Object(a.jsx)(X,{})})]}),Object(a.jsx)(Z,{})]})},ee=r(79),te=r(75),re=r.n(te),ae=r(76),ne=r.n(ae),ce=Object(ee.a)({spacing:4,palette:{primary:{main:re.a[500]},secondary:{main:ne.a[500]}}}),le=function(){var e=Object(j.b)();return Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedUser");if(t){var r=JSON.parse(t);e(f(r.username))}}),[e]),console.log("App using theme:",ce),Object(a.jsx)(o.a,{theme:ce,children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(g,{title:"Club Webstore",gutterBottom:!0}),Object(a.jsx)($,{})]})})},ie=r(77),se=r(37),je=r(78),oe=Object(se.combineReducers)({users:Q,login:m}),ue=Object(se.createStore)(oe,Object(je.composeWithDevTools)(Object(se.applyMiddleware)(ie.a)));i.a.render(Object(a.jsx)(j.a,{store:ue,children:Object(a.jsx)(s.a,{children:Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(le,{})})})}),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.88092bd9.chunk.js.map