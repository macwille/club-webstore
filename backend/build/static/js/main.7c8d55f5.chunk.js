(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{122:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c(0),a=c.n(r),i=c(11),s=c.n(i),l=c(25),j=c(15),o=c(167),u=c(168),b=c(157),d=c(85),O=c(170),x=c(125),h=c(154),p=c(156),m=c(124),f=function(e){return{type:"SET_LOGGED",user:e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_LOGGED":return null;case"SET_LOGGED":return t.user;default:return e}},g=function(){var e=Object(j.c)((function(e){return e.login})),t=Object(j.b)();return Object(n.jsx)(O.a,{children:Object(n.jsx)(h.a,{children:Object(n.jsxs)(p.a,{children:[Object(n.jsx)(m.a,{component:l.b,to:"/",children:"Home"}),Object(n.jsx)(m.a,{component:l.b,to:"/courses",children:"Courses"}),Object(n.jsx)(m.a,{component:l.b,to:"/store",children:"Store"}),Object(n.jsx)(m.a,{component:l.b,to:"/login",children:"Login"}),Object(n.jsx)(m.a,{component:l.b,to:"/register",children:"Register"}),e&&Object(n.jsx)(m.a,{onClick:function(e){e.preventDefault(),t({type:"CLEAR_LOGGED"}),window.localStorage.clear()},children:"Logout"})]})})})},y=function(e){var t=e.title,c=t||"PLACEHOLDER";return Object(n.jsx)(d.a,{color:"primary",children:Object(n.jsxs)(O.a,{p:3,children:[Object(n.jsx)(O.a,{py:8,children:Object(n.jsx)(x.a,{variant:"h1",align:"center",paragraph:!0,children:c})}),Object(n.jsx)(g,{})]})})},C=c(14),w=c(159),E=function(){return Object(n.jsx)(O.a,{children:Object(n.jsx)(b.a,{children:Object(n.jsx)(x.a,{variant:"h4",children:"Courses"})})})},A=c(47),k=c(9),S=c(82),D=c(164),L=c(171),I=c(165),T=c(18),q=c.n(T),M=c(26),R=c(36),W=c.n(R),G="/api/products",_={getAll:function(){return W.a.get(G).then((function(e){return e.data}))},create:function(){var e=Object(M.a)(q.a.mark((function e(t){var c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(G,t);case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=c(158),z=c(169),P=function(e){var t=Object(r.useState)(""),c=Object(A.a)(t,2),n=c[0],a=c[1];return{type:e,value:n,onChange:function(e){a(e.target.value)},clear:function(e){e.preventDefault(),a("")}}},B=function(e){var t=e.products,c=e.setProducts,r=P("text"),a=P("text"),i=P("number"),s=P("number");return Object(n.jsx)(O.a,{children:Object(n.jsx)(b.a,{children:Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault();var n={name:r.value,description:a.value,euros:i.value,cents:s.value};try{_.create(n).then((function(e){console.log("Added product",e),c(t.concat(e))}))}catch(l){console.log(l)}},children:Object(n.jsxs)(N.a,{container:!0,spacing:5,children:[Object(n.jsxs)(N.a,{item:!0,xs:12,children:[Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Name",variant:"outlined"},r),{},{clear:null,fullWidth:!0,required:!0})),Object(n.jsx)(m.a,{color:"primary",size:"small",onClick:r.clear,children:"Clear"})]}),Object(n.jsxs)(N.a,{item:!0,xs:12,children:[Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Description",variant:"outlined"},a),{},{clear:null,fullWidth:!0,required:!0})),Object(n.jsx)(m.a,{color:"primary",size:"small",onClick:a.clear,children:"Clear"})]}),Object(n.jsxs)(N.a,{item:!0,xs:3,children:[Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Euros",variant:"outlined"},i),{},{clear:null,min:"0",required:!0})),Object(n.jsx)(m.a,{color:"primary",size:"small",onClick:i.clear,children:"Clear"})]}),Object(n.jsxs)(N.a,{item:!0,xs:3,children:[Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Cents",variant:"outlined"},s),{},{clear:null,min:"0",max:"99",required:!0})),Object(n.jsx)(m.a,{color:"primary",size:"small",onClick:s.clear,children:"Clear"})]}),Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",type:"submit",children:"Create"})})]})})})})},U=c(163),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("Action",t),t.type){case"ADD_ITEM":return e.concat(t.item);case"REMOVE_ITEM":return e.filter((function(e){return e.id===t.item}));case"CLEAR_CART":return[];default:return e}},F=c(160),H=c(161),V=c(162),Y=Object(w.a)({productCard:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),K=function(e){var t=e.product,c=Y(),r=Object(j.b)();return Object(n.jsxs)(F.a,{className:c.productCard,children:[Object(n.jsxs)(H.a,{children:[Object(n.jsx)(x.a,{variant:"h6",children:t.name}),Object(n.jsxs)(x.a,{children:[t.euros,",",t.cents,"\u20ac"]})]}),Object(n.jsx)(V.a,{children:Object(n.jsx)(m.a,{onClick:function(e){e.preventDefault(),r({type:"ADD_ITEM",item:t}),console.log("Add product to cart:",t)},size:"small",children:"Add to Cart"})})]})},Q=function(e){var t=e.products;return t?Object(n.jsx)(O.a,{children:Object(n.jsx)(N.a,{container:!0,spacing:3,justify:"flex-start",alignItems:"baseline",direction:"row",children:t.map((function(e){return Object(n.jsx)(N.a,{item:!0,xs:6,sm:3,children:Object(n.jsx)(K,{product:e})},e.id)}))})}):Object(n.jsx)(O.a,{children:Object(n.jsx)(U.a,{})})},X=function(){var e=Object(j.c)((function(e){return e.cart}));return Object(n.jsx)(O.a,{children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)(x.a,{variant:"h4",paragraph:!0,children:"Your Cart"}),Object(n.jsxs)(x.a,{children:["You have ",e.length," items in your cart."]}),Object(n.jsx)(Q,{products:e})]})})},Z=function(e){var t=e.children,c=e.value,r=e.index,a=Object(S.a)(e,["children","value","index"]);return Object(n.jsx)("div",Object(k.a)(Object(k.a)({role:"tabpanel",hidden:c!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},a),{},{children:c===r&&Object(n.jsx)(O.a,{p:3,children:Object(n.jsx)(x.a,{children:t})})}))},$=function(){var e=Object(r.useState)(null),t=Object(A.a)(e,2),c=t[0],a=t[1],i=Object(r.useState)(0),s=Object(A.a)(i,2),l=s[0],j=s[1];Object(r.useEffect)((function(){_.getAll().then((function(e){a(e)}))}),[]);return Object(n.jsxs)(O.a,{children:[Object(n.jsx)(D.a,{color:"primary",position:"static",children:Object(n.jsxs)(L.a,{value:l,onChange:function(e,t){j(t)},children:[Object(n.jsx)(I.a,{label:"Store"}),Object(n.jsx)(I.a,{label:"Create"}),Object(n.jsx)(I.a,{label:"Cart"})]})}),Object(n.jsxs)(O.a,{p:3,pt:8,children:[Object(n.jsx)(Z,{value:l,index:0,children:Object(n.jsx)(Q,{products:c})}),Object(n.jsx)(Z,{value:l,index:1,children:Object(n.jsx)(B,{products:c,setProducts:a})}),Object(n.jsx)(Z,{value:l,index:2,children:Object(n.jsx)(X,{})})]})]})},ee="/api/users",te={getAll:function(){return W.a.get(ee).then((function(e){return e.data}))},create:function(){var e=Object(M.a)(q.a.mark((function e(t){var c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post(ee,t);case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce=function(){var e=Object(j.c)((function(e){return e.login})),t=Object(j.b)(),c=Object(C.f)(),r=P("text"),a=P("password"),i=P("text"),s=P("text"),l=P("text"),o=P("text"),u=P("email");return e?Object(n.jsx)(O.a,{children:Object(n.jsxs)(x.a,{variant:"h6",children:["Already Logged in as: ",e]})}):Object(n.jsxs)(b.a,{children:[Object(n.jsx)(O.a,{pb:8,children:Object(n.jsx)(x.a,{variant:"h4",children:"Register"})}),Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault();var n={username:r.value,firstname:i.value,lastname:s.value,address:l.value,postcode:o.value,email:u.value,password:a.value};try{te.create(n).then((function(e){console.log("Added user",e),t(f(e.username)),c.push("/")}))}catch(j){console.log(j)}},autoComplete:"off",children:Object(n.jsxs)(N.a,{container:!0,spacing:6,children:[Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Username",variant:"outlined"},r),{},{clear:null,autoFocus:!0,fullWidth:!0,required:!0}))}),Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Password",variant:"outlined"},a),{},{clear:null,fullWidth:!0,required:!0}))}),Object(n.jsx)(N.a,{item:!0,xs:6,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"First name",variant:"outlined"},i),{},{clear:null,required:!0}))}),Object(n.jsx)(N.a,{item:!0,xs:6,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Last name",variant:"outlined"},s),{},{clear:null,required:!0}))}),Object(n.jsx)(N.a,{item:!0,xs:6,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Address",variant:"outlined"},l),{},{clear:null}))}),Object(n.jsx)(N.a,{item:!0,xs:6,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Postcode",variant:"outlined"},o),{},{clear:null}))}),Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Email",variant:"outlined"},u),{},{clear:null}))}),Object(n.jsx)(N.a,{item:!0,xs:6,children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",type:"submit",children:"Submit"})}),Object(n.jsx)(N.a,{item:!0,xs:6,children:Object(n.jsx)(m.a,{onClick:function(e){r.clear(e),a.clear(e),i.clear(e),s.clear(e),l.clear(e),o.clear(e),u.clear(e)},variant:"contained",color:"primary",children:"Clear"})})]})})]})},ne={login:function(){var e=Object(M.a)(q.a.mark((function e(t){var c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.a.post("/api/login",t);case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},re=function(){var e=Object(j.c)((function(e){return e.login})),t=Object(j.b)(),c=Object(C.f)(),r=P("text"),a=P("password"),i=function(){var e=Object(M.a)(q.a.mark((function e(n){var i;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,ne.login({username:r.value,password:a.value});case 4:i=e.sent,localStorage.setItem("token",i.token),window.localStorage.setItem("loggedUser",JSON.stringify(i)),t(f(i.username)),c.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Exception logging in",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return e?Object(n.jsx)(b.a,{children:Object(n.jsxs)(x.a,{variant:"h6",children:["Already Logged in as: ",e]})}):Object(n.jsxs)(b.a,{children:[Object(n.jsx)(O.a,{pb:8,children:Object(n.jsx)(x.a,{variant:"h4",children:"Login"})}),Object(n.jsx)("form",{onSubmit:i,children:Object(n.jsxs)(N.a,{container:!0,spacing:6,children:[Object(n.jsxs)(N.a,{item:!0,xs:12,children:[Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Username",variant:"outlined"},r),{},{clear:null,autoFocus:!0,fullWidth:!0,required:!0})),Object(n.jsx)(m.a,{color:"primary",onClick:r.clear,children:"Clear"})]}),Object(n.jsxs)(N.a,{item:!0,xs:12,children:[Object(n.jsx)(z.a,Object(k.a)(Object(k.a)({label:"Password",variant:"outlined"},a),{},{clear:null,fullWidth:!0,required:!0})),Object(n.jsx)(m.a,{color:"primary",onClick:a.clear,children:"Clear"})]}),Object(n.jsx)(N.a,{item:!0,xs:12,children:Object(n.jsx)(m.a,{variant:"contained",color:"primary",type:"submit",children:"Login"})})]})})]})},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return t.data;case"ADD":return t.user;default:return e}},ie=function(){var e=Object(j.c)((function(e){return e.users})),t=Object(j.b)();Object(r.useEffect)((function(){t(function(){var e=Object(M.a)(q.a.mark((function e(t){var c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.getAll();case 2:c=e.sent,t({type:"INIT",data:c});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]);return Object(n.jsx)(O.a,{children:Object(n.jsxs)(b.a,{children:[Object(n.jsx)(x.a,{variant:"h4",children:"Users"}),Object(n.jsx)("ul",{children:e?e.map((function(e){return Object(n.jsx)("li",{children:Object(n.jsxs)(x.a,{paragraph:!0,children:[e.username," - ",e.firstname," ",e.lastname," ",e.address,"."]})},e.id)})):Object(n.jsx)(U.a,{})})]})})},se=Object(w.a)({mainBody:{minHeight:"40em",marginTop:"2em"}}),le=function(){var e=se();return Object(n.jsx)(d.a,{className:e.mainBody,children:Object(n.jsxs)(C.c,{children:[Object(n.jsx)(C.a,{path:"/courses",children:Object(n.jsx)(E,{})}),Object(n.jsx)(C.a,{path:"/store",children:Object(n.jsx)($,{})}),Object(n.jsx)(C.a,{path:"/register",children:Object(n.jsx)(ce,{})}),Object(n.jsx)(C.a,{path:"/login",children:Object(n.jsx)(re,{})}),Object(n.jsx)(C.a,{path:"/",children:Object(n.jsx)(ie,{})})]})})},je=c(166),oe=function(){return Object(n.jsx)(O.a,{pb:"2em",pt:"40em",children:Object(n.jsxs)(x.a,{align:"center",children:["Made by Ville Manninen. Licensed ",Object(n.jsx)(je.a,{href:"https://opensource.org/licenses/MIT",children:"MIT"})]})})},ue=c(81),be=c(77),de=c.n(be),Oe=c(78),xe=c.n(Oe),he=Object(ue.a)({spacing:4,palette:{primary:{main:de.a[500]},secondary:{main:xe.a[500]}}}),pe=function(){var e=Object(j.b)();return Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedUser");if(t){var c=JSON.parse(t);e(f(c.username))}}),[e]),console.log("App using theme:",he),Object(n.jsxs)(o.a,{theme:he,children:[Object(n.jsx)(u.a,{}),Object(n.jsxs)(b.a,{children:[Object(n.jsx)(y,{title:"Club Webstore",gutterBottom:!0}),Object(n.jsx)(le,{}),Object(n.jsx)(oe,{})]})]})},me=c(79),fe=c(38),ve=c(80),ge=Object(fe.combineReducers)({users:ae,login:v,cart:J}),ye=Object(fe.createStore)(ge,Object(ve.composeWithDevTools)(Object(fe.applyMiddleware)(me.a)));s.a.render(Object(n.jsx)(j.a,{store:ye,children:Object(n.jsx)(l.a,{children:Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(pe,{})})})}),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.7c8d55f5.chunk.js.map